
<!DOCTYPE html>
<meta charset="utf-8">


<style> /* set the CSS */

body { font: 12px Arial;}

div.tooltip {	
    position: absolute;			
    text-align: center;			
    width: 60px;					
    height: 28px;					
    padding: 2px;				
    font: 12px sans-serif;		
    background: black;	
    border: 0px;		
    border-radius: 8px;			
    pointer-events: none;			
}

body{
        background-color: whitesmoke;
     }

    :root {
      --line-chart-color: #4682b4;
      --annotation-context-color: rgb(52, 11, 235);
      --annotation-above-color: #00BFA5;
      --annotation-anomaly-color: #E8336D;
    }

     svg {
        background-color: white;
        font-family: 'Lato';
     }

     .axis, .axis text {
       fill: var(--line-chart-color);
     }

     .axis line, path {
      stroke: "black";
      stroke-width: 2px;
     }


     path {
       fill: none;
     }



    text.title {
      font-size: 1.2em;
      font-weight: bold;
    }

   .button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;

</style>
<body>

    <p>
    <img src="https://sonalipal.github.io/NetflixAnalysis/img1.jpg" alt="Girl in a jacket" width="1500" height="200" style="float:left"
  style="vertical-align:bottom"></img></br> </br></br> </br></br> </br></br> </br></br> </br></br> </br>
</br> </p></br>
  </p>
  <p style="font-size: 18px ; font: 'Lato'" x=30 y=500> Netflix is the world's leading internet entertainment service with 158 million paid memberships in over 190 countries enjoying TV series, documentaries and feature films across a wide variety of genres and languages.  
    Back when Netflix started in 1998, they rented out and even sold DVD copies of content over the mail. The major shift happened in 2010 when they ushered into digital streaming services. 
    They kept on investing in personalization and user experience, and that has made them one of the premier media streaming services in the world.  </br> </br>
  This analysis is about how Netflix's diverse content helped them achieve this tremendous growth.</p>
    
    
    <text class="title" x=40 y=50>Netflix Revenue Analysis</text>
  
      <script src="https://d3js.org/d3.v4.js"></script>
   
      
  
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- Create a div where the graph will take place -->
<div id="my_dataviz">
</div>

<script>


// set the dimensions and margins of the graph
const margin = {top: 40, right: 100, bottom: 40, left: 100},
    width = 960,
    height = 320; 
  
  
    // Define the div for the tooltip
var div = d3.select("body").append("div")	
    .attr("class", "tooltip")		
    .style("opacity", 0);


// append the svg object to the body of the page
var svg = d3.select("body")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .attr("align","center")
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");
    
//d3.select("#chart").attr("align","center");

  svg.append("text")
        .attr("x", (10))             
        .attr("y", (30))
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .style("text-decoration", "underline")  
        .attr("stroke", "grey")  
        .text("Revenue in mil. USD-$");

        svg.append("text")
        .attr("x", (10))             
        .attr("y", (60))
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .style("text-decoration", "underline")
        .attr("stroke", "grey")  
        .text("Hover over each dot to see yearly revenue");


        svg.append("text")
        .attr("x", (400))             
        .attr("y", (330))
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .attr("stroke", "grey")  
        .text("Revenue grew ~3 times since 2015...");

       
        svg.append("text")
        .attr("x", (660))             
        .attr("y", (370))
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .attr("stroke", "grey")  
        .text("Rev:$6,780 mil.");

        svg.append("text")
        .attr("x", (660))             
        .attr("y", (355))
        .attr("text-anchor", "left")  
        .style("font-size", "15px")  
        .attr("stroke", "grey")  
        .text("Yr: 2015");
        
        svg.append("text")
        .attr("x", (950))             
        .attr("y", (40))
        .attr("text-anchor", "left")  
        .style("font-size", "15px")  
        .attr("stroke", "grey")  
        .text("Rev: $20,156 mil.");

        svg.append("text")
        .attr("x", (950))             
        .attr("y", (25))
        .attr("text-anchor", "left")  
        .style("font-size", "15px")  
        .attr("stroke", "grey")  
        .text("Yr: 2019");

        svg.append("text")
        .attr("x", (320))             
        .attr("y", (465))
        .attr("text-anchor", "left")  
        .style("font-size", "15px")  
        .attr("stroke", "grey")  
        .text("Yr: 2010");


        svg.append("text")
        .attr("x", (320))             
        .attr("y", (480))
        .attr("text-anchor", "left")  
        .style("font-size", "15px") 
        .attr("stroke", "grey")  
        .text("Rev:$2,163 mil.");


    
    svg.append("svg:defs").append("svg:marker")
    .attr("id", "triangle")
    .attr("refX", 6)
    .attr("refY", 6)
    .attr("markerWidth", 30)
    .attr("markerHeight", 30)
    .attr("markerUnits","userSpaceOnUse")
    .attr("orient", "auto")
    .append("path")
    .attr("d", "M 0 0 12 6 0 12 3 6")
    .style("fill", "black");
   
   
    
    //line              
        svg.append("line")
        
            .attr("x1", 665)
            .attr("y1", 330)
            .attr("x2", 930)
            .attr("y2", 0)
            .attr("stroke-width", 1)
            .attr("stroke", "black")
            .attr("marker-end", "url(#triangle)");


// Parse the Data
d3.csv("https://raw.githubusercontent.com/sonalipal/CS498DataViz/master/netflix_rev_trend.csv", 
       function(d){
    return {  year : d3.timeParse("%Y-%m-%d")(d.year), revenue : d.revenue}
  },
       
       function(data) {
 console.log(data);
    
       // Add X axis --> it is a date format
    var x =  d3.scaleTime()  //scaleLinear()   //d3.scaleTime()
       .domain(d3.extent(data, function(d) { return  d.year; }))
      .range([ 0, width ]);
    svg.append("g")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

    // Add Y axis
    var y = d3.scaleLinear()
      .domain([0, d3.max(data, function(d) { return + d.revenue; })])
      .range([ height, 0 ]);
    svg.append("g")
      .call(d3.axisLeft(y));
      


// This allows to find the closest X index of the mouse:
  var bisect = d3.bisector(function(d) { return d.year; }).left;

  // Create the circle that travels along the curve of chart
  var focus = svg
    .append('g')
    .append('circle')
      .style("fill", "black")
      .attr("stroke", "black")
      .attr('r', 4)
      .style("opacity", 30)


  // Create the text that travels along the curve of chart
  var focusText = svg
    .append('g')
    .append('text')
      .style("opacity", 50)
      .attr("text-anchor", "left")
      .attr("alignment-baseline", "left")
      
      
        // Add the scatterplot
    svg.selectAll("dot")	
        .data(data)			
    .enter().append("circle")								
        .attr("r", 5)		
        .attr("cx", function(d) { return x(d.year); })		 
        .attr("cy", function(d) { return y(d.revenue); })	
        .attr("fill" , "red")	
        .on("mouseover", function(d) {		
            div.transition()		
                .duration(200)		
                .style("opacity", 10);		
        
            })					
        .on("mouseout", function(d) {		
            div.transition()		
                .duration(500)		
                .style("opacity", 0);	
        });
      

      

    // Add the line
    svg.append("path")
      .datum(data)
      .attr("fill", "none")
      .attr("stroke", "red")
      .attr("stroke-width", 1.5)
      .attr("d", d3.line()
        .x(function(d) { return x(d.year) })
        .y(function(d) { return y(d.revenue) })
        )
        
        
        
     
      
  // Create a rect on top of the svg area: this rectangle recovers mouse position
  svg
    .append('rect')
    .style("fill", "none")
    .style("pointer-events", "all")
    .attr('width', width)
    .attr('height', height)
    .on('mouseover', mouseover)
    .on('mousemove', mousemove)
    .on('mouseout', mouseout);



  // What happens when the mouse move -> show the annotations at the right positions.
  function mouseover() {
    focus.style("opacity", 1)
    focusText.style("opacity",1)
  }

  function mousemove() {
    // recover coordinate we need
    var x0 = x.invert(d3.mouse(this)[0]);
    var i = bisect(data, x0, 1);
    selectedData = data[i]
    focus
      .attr("cx", x(selectedData.year))
      .attr("cy", y(selectedData.revenue))
    focusText
      .html("$" + selectedData.revenue + " mil.")
      .attr("x", x(selectedData.year)+15)
      .attr("y", y(selectedData.revenue)+ 10)
    }
  function mouseout() {
    focus.style("opacity", 0)
    focusText.style("opacity", 0)
  }
    
})

</script>

 <p style="font-size:18px;">Next, we are going to analyze revenue and paid membership growth.
          <form>
              <button class="button" type="submit" formaction="https://sonalipal.github.io/NetflixAnalysis/netflixMemberGrowth.html" >Next >></button>
            </form>
       </p>
  
       

</body>
    
